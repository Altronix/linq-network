<!DOCTYPE html>
<html>
  <head>
    <title>Demo...</title>
  </head>
  <body>
    <p id="msg"></p>
  </body>
</html>
<script>
  console.log("starting demo");
  const msg = document.getElementById("msg");
  const socket = new WebSocket("ws://localhost:8000");
  socket.addEventListener("open", function(event) {
    console.log("Open");
  });
  socket.addEventListener("close", function(event) {
    console.log("Close");
  });
  socket.addEventListener("error", function(error) {
    console.log(error.message);
  });
  socket.addEventListener("message", function(event) {
    try {
      let data = JSON.parse(event.data);
      msg.innerText = msg.innerText + "\n" + JSON.stringify(data);
    } catch (e) {
      console.log(e);
    }
  });

  msg.innerText = "Starting Demo...";
</script>
